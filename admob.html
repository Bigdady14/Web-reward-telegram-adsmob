<!DOCTYPE html>
<html>
<head>
  <title>Tonton Iklan - BEX</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 30px; }
    button { padding: 15px 25px; font-size: 16px; margin-top: 20px; }
    #status { margin-top: 20px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>üé• Tonton Iklan & Dapatkan 0.1 BEX</h1>
  <button onclick="showAd()">Tonton Iklan</button>
  <p id="status">Menunggu interaksi pengguna...</p>

  <script>
    // Ambil Telegram user_id
    const user_id = Telegram.WebApp.initDataUnsafe?.user?.id;

    function showAd() {
      document.getElementById('status').innerText = "üé¨ Menonton iklan...";

      // Simulasi delay iklan
      setTimeout(() => {
        document.getElementById('status').innerText = "‚è≥ Memberi reward...";

        // Kirim ke backend kamu
        fetch('http://192.168.1.100:8000/reward_ad', {  // ganti IP sesuai lokalmu
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ user_id: user_id })
        })
        .then(res => res.json())
        .then(data => {
          if (data.status === "success") {
            document.getElementById('status').innerText = "‚úÖ Reward diberikan: 0.1 BEX!";
          } else {
            document.getElementById('status').innerText = "‚ö†Ô∏è Gagal: " + data.message;
          }
        })
        .catch(err => {
          document.getElementById('status').innerText = "‚ùå Gagal terhubung ke server.";
        });

      }, 4000); // Simulasi 4 detik nonton iklan
    }
  </script>
</body>
</html>
